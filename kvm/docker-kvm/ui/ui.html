<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>test</title>
    <link type="text/css" rel="stylesheet" href="css/ui.css" />
    <link rel="stylesheet" href="css/font-awesome.min.css">
</head>
<body>
<div id="main">
  <div id="overlay"><div id="overlay_text">Wait......</div></div>
  <!-- ############## -->
  <div id="sidebar">
    <ul>
      <li><a href='#'>KVMHosts</a>
        <ul>
          <li><a href="javascript:showView('hostlist')">host01</a></li>
        </ul>
      </li>
      <li><a href='#'>About</a>
        <ul>
          <li><a href="javascript:showView('about')">about</a></li>
        </ul>
      </li>
    </ul>
  </div>
  <!-- ############## -->
  <div id="content">
    <div id="about" class="tabContent">
        <h1>demos</h1>
        <button onclick="showView('addiso')">addiso</button>
        <button onclick="showView('addnet')">addnet</button>
        <button onclick="showView('adddisk')">adddisk</button>
        <button onclick="showView('createvm')">createvm</button>
    </div>
    <!-- ############## -->
    <div id="hostlist" class="tabContent">
      <section>
        <div class="form-wrapper" id="host">
          <div class="form-wrapper-header"><h2>KVM HOST</h2><div><button class='hovertext' data-hover='Create VM' onclick='create_vm("host01", "x86_64")'><i class="fa fa-plus"></i></button></div></div><br>
          <table class="scrolldown"><tr><th width="20%">active</th><td>0</td></tr><tr><th width="20%">arch</th><td>x86_64</td></tr><tr><th width="20%">desc</th><td>null</td></tr><tr><th width="20%">inactive</th><td>0</td></tr><tr><th width="20%">ipaddr</th><td>192.168.168.1</td></tr><tr><th width="20%">name</th><td>host01</td></tr><tr><th width="20%">sshport</th><td>60022</td></tr><tr><th width="20%">tpl</th><td>newvm.vnc.tpl</td></tr><tr><th width="20%">url</th><td>qemu+tls://192.168.168.1/system</td></tr></table>
        </div>
        <hr>
        <div id="vms" class="columns">
          <div class="form-wrapper">
            <div class="form-wrapper-header"><h2>KVM GUEST</h2><div><button class='hovertext' data-hover='VNC'><i class="fa fa-television"></i></button><button class='hovertext' data-hover='Start'><i class="fa fa-play"></i></button><button class='hovertext' data-hover='Stop'><i class="fa fa-power-off"></i></button><button class='hovertext' data-hover='ForceStop'><i class="fa fa-plug"></i></button><button class='hovertext' data-hover='Undefine'><i class="fa fa-times"></i></button><button class='hovertext' data-hover='Add ISO' onclick='showView("addiso")'><i class="fa fa-plus"></i></button><button class='hovertext' data-hover='Add NET' onclick='showView("addnet")'><i class="fa fa-plus"></i></button><button class='hovertext' data-hover='Add DISK' onclick='showView("adddisk")'><i class="fa fa-plus"></i></button></div></div><br>
            <table class="scrolldown"><tr><th width="20%">cputime</th><td>0</td></tr><tr><th width="20%">create</th><td>20250219125843</td></tr><tr><th width="20%">curcpu</th><td>2</td></tr><tr><th width="20%">curmem</th><td>2097152</td></tr><tr><th width="20%">desc</th><td></td></tr><tr><th width="20%">gateway</th><td>null</td></tr><tr><th width="20%">ipaddr</th><td>192.168.168.2/3222</td></tr><tr><th width="20%">maxmem</th><td>16777216</td></tr><tr><th width="20%">state</th><td>5</td></tr><tr><th width="20%">uuid</th><td>7cb79a8a-5d9f-4a53-9705-6b37f6085c11</td></tr><tr><th width="20%">vcpus</th><td>8</td></tr><tr></table></div>
          </div>
      </section>
    </div>
    <!-- ############## -->
    <div id="display" class="tabContent">
      <embed id="display" width="800" height="600" src="" type="text/html"/>
    </div>
    <!-- ############## -->
    <div id="addiso" class="tabContent">
      <div class="form-wrapper">
        <div class="form-wrapper-header">
          <h2>AddISO</h2>
          <button class="close" onclick="showView('hostlist')"></button>
        </div>
        <form id="addiso_form">
          <div id="iso_list">
            <label>ISO:
              <select name="device">
                <option value="centos_x86_64">centos8 x86_64</option>
              </select>
            </label>
          </div>
          <input type="submit" value="Submit"/>
        </form>
      </div>
    </div>
    <!-- ############## -->
    <div id="addnet" class="tabContent">
      <div class="form-wrapper">
        <div class="form-wrapper-header">
          <h2>AddNetwork</h2>
          <button class="close" onclick="showView('hostlist')"></button>
        </div>
        <form id="addnet_form">
          <div id="net_list">
            <label>Network:
              <select name="device">
                <option value="br-ext">bridge netnwork</option>
              </select>
            </label>
          </div>
          <input type="submit" value="Submit"/>
        </form>
      </div>
    </div>
    <!-- ############## -->
    <div id="adddisk" class="tabContent">
      <div class="form-wrapper">
        <div class="form-wrapper-header">
          <h2>AddDISK</h2>
          <button class="close" onclick="showView('hostlist')"></button>
        </div>
        <form id="adddisk_form">
          <div id="gold_list">
            <label>Gold:
              <select name="gold">
                <option value="" selected>数据盘</option>
                <option value="syslinux">linunx</option>
              </select>
            </label>
          </div>
          <div id="dev_list">
            <label>Disk:
              <select name="device">
                <option value="filesys">rbd disk</option>
              </select>
            </label>
          </div>
          <label>Size(GB):<input type="number" name="size" value="10" min="1" max="1024"/></label>
          <input type="submit" value="Submit"/>
        </form>
      </div>
    </div>
    <!-- ############## -->
    <div id="createvm" class="tabContent">
      <div class="form-wrapper">
        <div class="form-wrapper-header">
          <h2>CreateVM</h2>
          <button class="close" onclick="showView('hostlist')"></button>
        </div>
        <form id="createvm_form">
          <div class="form-wrapper-input-flex">
            <div><label>cpu<input type="number" name="vm_vcpus" value="2" min="1" max="16"/></label></div>
            <div><label>mem(MB)<input type="number" name="vm_ram_mb" value="2048" min="1024" max="16384" step="1024"/></label></div>
          </div>
          <label>desc<textarea rows="3" name="vm_desc" placeholder="vm desc here..."></textarea></label>
          <div class="form-wrapper-input-flex">
            <div><label>ip*<input type="text" name="vm_ip" placeholder="ipaddr like 192.168.168.2/24" required/></label></div>
            <div><label>gw<input type="text" name="vm_gw" placeholder="gateway like 192.168.168.1"/></label></div>
          </div>
          <div id="meta_data"><table id="table_meta_data"></table></div>
          <input type="button" value="AddField" onclick="add_meta()"/>
          <input type="reset" value="Reset"/>
          <input type="submit" value="Submit"/>
        </form>
      </div>
    </div>
    <!-- ############## -->
  </div>
</div>
<script language="javascript" src="js/ui.js"></script>
<script>
function set_name(r) {
  var i = r.parentNode.parentNode.rowIndex;
  var input = document.getElementById("table_meta_data").rows[i].cells[1].getElementsByTagName('input')
  input[0].name=r.value;
}
function del_meta(r) {
  var i = r.parentNode.parentNode.rowIndex;
  document.getElementById("table_meta_data").deleteRow(i);
}
function add_meta() {
  var tableRef = document.getElementById("table_meta_data");
  var newRow = tableRef.insertRow(-1);
  var c_name = newRow.insertCell(0);
  var c_value = newRow.insertCell(1);
  var del_btn = newRow.insertCell(2);
  c_name.innerHTML = '<input type="text"/ placeholder="name" onChange="set_name(this)">';
  c_value.innerHTML = '<input type="text" placeholder="value" required>';
  del_btn.innerHTML = '<input type="button" value="Remove" onclick="del_meta(this)"/>';
}
</script>
</body>
</html>
