Amlogic Meson S905x (GXL)
The Amlogic Meson S905x is a SoC with a quad core Arm Cortex-A53 running at 1.5Ghz. It also contains a Cortex-M3 used as SCP.
This port is a minimal implementation of BL31 capable of booting mainline U-Boot and Linux:
SCPI support.
Basic PSCI support (CPU_ON, CPU_OFF, SYSTEM_RESET, SYSTEM_OFF). Note that CPU0 can’t be turned off, so there is a workaround to hide this from the caller.
GICv2 driver set up.
Basic SIP services (read efuse data, enable/disable JTAG).

Vendor ID:               ARM
  Model name:            Cortex-A53
    Model:               4
    Thread(s) per core:  1
    Core(s) per cluster: 4
    Socket(s):           -
    Cluster(s):          1
    Stepping:            r0p4

barrier: (Share mouse, keyboard and clipboard over the network, support win/linux)
xvkbd (virtual keyboard)
# this command sends the key control+c
xvkbd -no-jump-pointer -xsendevent -text '\Cc'
# this command sends mouse left click
xvkbd -no-jump-pointer -xsendevent -text '\m1'

DEBIAN_VERSION=bookworm ./s905_debootstrap.sh wireguard-tools v4l-utils triggerhappy sshfs python3-pip python3-venv nmon iptables dbus-x11 cec-utils build-essential bluez bluez-tools bind9 bind9utils slapd ldap-utils keepalived gnupg apt-transport-https rng-tools-debian mesa-utils unzip xxd qemu-utils mame ssmtp bind9-dnsutils polkitd-pkla python3-dev usbutils

# apt install triggerhappy
https://aur.archlinux.org/packages/firmware-phicomm-n1
# binary replace boot_targets=, first boot usb
sed -e "s/boot_targets=romusb mmc0 mmc1 mmc2 usb0 pxe dhcp/boot_targets=romusb usb0 usb1 mmc0 mmc1 pxe dhcp\x0/g" u-boot.bin.new > new.bin
xxd -p -c 2127800 uboot.bin | sed "s/$(echo -n 'boot_targets=romusb mmc0 mmc1 mmc2 usb0 pxe dhcp' | xxd -p -c 1000)/$(echo -n 'boot_targets=romusb usb0 usb1 mmc0 mmc1 pxe dhcp' | xxd -p -c 1000)/g" | xxd -p -r > newuboot.bin
# bootcmd_mmc2=devnum=2; run mmc_boot ==> bootcmd_usb1=devnum=1; run usb_boot
# uboot read ethaddr env value to set network mac address
#led
echo 0 > /sys/devices/platform/leds/leds/n1\:white\:status/brightness
echo 255 > /sys/devices/platform/leds/leds/n1\:white\:status/brightness
#get temp
awk '{print $1/1000}' /sys/class/hwmon/hwmon0/temp1_input
journalctl -alb
apt install --no-install-recommends  rsyslog
systemctl enable getty@tty1
systemctl enable getty@tty2
#systemctl set-default multi-user.target
#ln -s /lib/systemd/system/multi-user.target /etc/systemd/system/default.target

#multimedia
echo "deb http://www.deb-multimedia.org  main non-free" > /etc/apt/sources.list.d/multimedia.conf
apt-get update -oAcquire::AllowInsecureRepositories=true
apt-get install deb-multimedia-keyring
#bluetooth
apt install --no-install-recommends blueman pulseaudio pulseaudio-module-bluetooth pavucontrol mpg123

# auto power on bluetooth, hciconfig hci0 up / bluetoothctl power on
cat <<EOF > /etc/bluetooth/main.conf
[Policy]
AutoEnable=true
EOF

hciconfig
bluetoothctl
    power on
    agent on
    default-agent
    scan on
    pair xx:xx:xx:xx:xx:xx
    trust xx:xx:xx:xx:xx:xx
    connect xx:xx:xx:xx:xx:xx
    scan off
    exit

bluetoothd -C
sdptool add SP
reboot
bluetoothctl
    power on
    discoverable on
    scan on
    trust <PHONE_ADDRESS>
    pair <PHONE_ADDRESS>
python
    apt-get install python-bluez
    #!/usr/bin/env python
        from bluetooth import *
        server_sock=BluetoothSocket( RFCOMM )
        server_sock.bind(("",PORT_ANY))
        server_sock.listen(1)
        port = server_sock.getsockname()[1]
        uuid = "815425a5-bfac-47bf-9321-c5ff980b5e11"
        advertise_service( server_sock, "RPi Wifi config",
                           service_id = uuid,
                           service_classes = [ uuid, SERIAL_PORT_CLASS ],
                           profiles = [ SERIAL_PORT_PROFILE ])
        print "Waiting for connection on RFCOMM channel %d" % port
        client_sock, client_info = server_sock.accept()
        print "Accepted connection from ", client_info
        client_sock.send(ssid_discovered())
        ssid = client_sock.recv(1024)
        client_sock.close()
        server_sock.close()

#Xfce
apt install --no-install-recommends lightdm xserver-xorg-core xinit xserver-xorg-video-fbdev xfce4 xfce4-terminal xserver-
apt install --no-install-recommends mpv smplayer qt4-qtconfig libqt4-opengl
ldconfig


anyremote qdbus dbus-x11
DISPLAY=:0 anyremote -f /usr/share/anyremote/cfg-data/Server-mode/smplayer.cfg

AT MODE:
hcitool scan
sdptool browse XX:XX:XX:XX
    Search for "Serial Port" or "Dialup Networking" services and their channel numbers.
    To connect anyRemote to the phone it needs to run it with -s rfcomm:XX:XX:XX:XX:Y
    command line parameter, where Y is the channel number.

Server MODE:
hcitool dev : get hci address
In case of impossibility to establish bluetooth connection, please make sure:
1.Bluetooth daemon bluetoothd is started with -C option
2.You have enough permissions to register SDP service
    sdptool search --bdaddr local SP (Permission denied) then you need to run anyRemote using sudo
kTLS
   CONFIG_TLS=m 
V2L2:
    v4l2-ctl --list-formats-ext
HDMI CEC:
    # # GXBB, GXL and GXM embeds the Synopsys DesignWare HDMI TX IP version 2.01a with HDCP and I2C & S/PDIF audio source interfaces.
    xrandr --prop
    apt-get install cec-utils libcec-dev
    cec-client -l

IO_SCHEDULER:
    cat /sys/class/block/mmcblk0/queue/scheduler
CPU FREQ:
    echo "scpi-cpufreq" >> /etc/modules
    /sys/devices/system/cpu/cpufreq/policy0/cpuinfo_cur_freq
EDID:
    echo -n "edid/1280x1024.bin" > /sys/module/drm/parameters/edid_firmware
    # drm.edid_firmware=edid/1280x1024.bin
    # video=HDMI-A-1:1280x1024@60e
    # # Documentation/fb/modedb.txt, "<ouput>:<WxH>@<rate><flags>" with "e" flag at the end is "force the display to be enabled", to avoid all that hotplug jank.
    # # kernel has built-in standard EDID blobs, so there's no need to put anything to /lib/firmware, initramfs or whatever:
    # drm_kms_helper.edid_firmware=edid/1920x1080.bin video=HDMI-A-1:1280x1024@60e

NFS ROOTFS:(kernel config)
    CONFIG_NFS_FS=y
    CONFIG_ROOT_NFS=y
  /etc/exports
    /opt/nfsroot  *(rw,sync,no_subtree_check,no_root_squash)

# SMT :全称"SimultaneousMultithreading",同时多线程,又称为"超线程"
# MC  :Multicore多核,每个物理核心独享一个L1 Cache缓存;
# SoC :System on Chip,系统级芯片;
# CONFIG_SCHED_SMT: 对应SMT芯片
# CONFIG_SCHED_MC : 对应MC多核芯片
# DIE             : 对应SoC芯片
cat > check_n1_hw_present.sh <<EOF
#!/usr/bin/env bash
aplay -l
hciconfig
ifconfig wlan0
ifconfig eth0
EOF

# use hardware RNG
apt install rng-tools

# # STAGING -> CONFIG_VIDEO_MESON_VDEC test case
# mpv --msg-level=all=v --hwdec=v4l2m2m-copy --hwdec-codecs=all --vo=xv test.mp4
# ffmpeg -c:v h264_v4l2m2m -i 1.mp4 -map 0:v -f null -y /dev/null

other phicomm n1 kernel config:
# https://www.kernel.org/doc/html/latest/gpu/meson.html
CONFIG_PREEMPT_VOLUNTARY=y

CONFIG_ARCH_MESON=y

CONFIG_MESON_GXL_PHY=y

# hdmi
CONFIG_DRM_MESON=m
CONFIG_DRM_MESON_DW_HDMI=m
# sound
CONFIG_SND_MESON_GX_SOUND_CARD=m
# network
CONFIG_BRCMFMAC=m
CONFIG_BRCMFMAC_SDIO=y
# mmc
CONFIG_MMC_MESON_GX=y
CONFIG_MMC_MESON_MX_SDIO=y
# bluetooth
CONFIG_BT_HCIUART=m
CONFIG_BT_HCIUART_3WIRE=y
CONFIG_BT_HCIUART_BCM=y

+&sd_emmc_a {
+        max-frequency = <100000000>;
+        sd-uhs-sdr50;
+        //max-frequency = <200000000>;
+        //sd-uhs-sdr104;
+        //max-frequency = <50000000>;
+        //sd-uhs-ddr50;
+};
+
+&sd_emmc_b {
+       status = "disabled";
+};
+
+&ethmac {
+       snps,force_thresh_dma_mode;
+       snps,aal;
+       snps,txpbl = <0x8>;
+       snps,rxpbl = <0x8>;
+};
